<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>PT map Using Raphael.js</title>
    <style>
      /**
       * Basic styles for container and hover states.
       */
      #container {
        width: 600px;
        height: 800px;
      }
      #container path:hover {
        fill: #cacaca;
      }
    </style>
  </head>
  <body>
    <div id="container"></div><!-- html container for the map -->
    
    <script src="raphael-min.js"></script><!-- load Raphael library -->
    <script src="distritos.js"></script><!-- load our paths -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>



    <script>
      window.onload = function () {
        var tipText = "";
        var tip = $("#container");
        var over = false;
        
        // Create canvas and define attributes shared by all paths.
        var R = Raphael("container", 800, 600),
          attr = {
          "fill": "#b9b9b9",
          "stroke": "#fff",
          "stroke-miterlimit": "4",
          "stroke-width": "3",
          "transform": "t-1000,100s1.8,1.8,99,0" // Scales the path to a useful size.
        }; 
        // Define map object. 
        var ptMap = {};
        for (var distrito in distritosPaths) {
          // Draw a path, then apply attributes to it.
          ptMap[distrito] = R.path(distritosPaths[distrito]).attr(attr);
          // Name the internal Raphael id after the africaPaths property name.
          ptMap[distrito].id = distrito;
          // Name the element id after the africaPaths property name.
          ptMap[distrito].node.id = distrito;
        }

        $("#container path").click(event => {
            R.clear();     
            setTimeout(()=> {
                var ptMap = {};
                distrito = event.target.id;           
                attr2 = {
                    "fill": "#b9b9b9",
                    "stroke": "#fff",
                    "stroke-miterlimit": "4",
                    "stroke-width": "3",
                    "transform": "t400,-100s3.5,3.5,99,0",
                    "title":"tolltip",
                    "data-toggle":"tooltip" // Scales the path to a useful size.
                }; 
                for (concelho in distritos[distrito]) {
                    ptMap[concelho] = R.path(distritos[distrito][concelho]).attr(attr2)
                    // Name the internal Raphael id after the africaPaths property name.
                    ptMap[concelho].id = concelho;
                    // Name the element id after the africaPaths property name.
                    ptMap[concelho].node.setAttribute("title",concelho);
                    ptMap[concelho].node.setAttribute("id",concelho);
                    ptMap[concelho].node.setAttribute("data-toggle","tooltip");
                    addTip(ptMap[concelho], concelho);
                    
                    
                }
                
            },50);
        }) 
        
        $("#container path").mouseover(event=> {
            console.log(event.target.id);
        });
        
        
        $("container a").mousemove(function(e){
            if (over){
            tip.css("left", e.clientX+20).css("top", e.clientY+20);
            tip.text(tipText);
            }
        });
        
        function addTip(node, txt){
            $(node).mouseenter(function(){
            tipText = txt;
            tip.fadeIn();
            over = true;
            }).mouseleave(function(){
            tip.fadeOut(200);
            over = false;
            });
        }
        // For an example of interaction via Raphael, uncomment the line below.
        // var demo1 = R.getById('tanzania').attr({"fill": "green"});
        // For an example of interaction via javascript, uncomment the line below.
        // var demo2 = document.getElementById('south_africa'); demo2.style.fill= "green";
      };
    </script>
  </body>
</html>